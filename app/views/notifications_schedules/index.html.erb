<div class="container navless-container">
  <%= link_to 'Add new',
              { :controller => :notifications_schedules, :action => :new },
              { :class => 'btn btn-success' } %>
  <hr>
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Schedules for: <%= @notification.value %></h3>
    </div>
    <div class="panel-body">
      Time now: <p class="text-primary"><%= Time.now %></p>
      <% if @notification.active? %>
          State: <p class="text-success">Active</p>
      <% else %>
          State: <p class="text-danger">Passive</p>
      <% end %>
    </div>
  </div>
  <hr>
  <% if @notification.notifications_schedules.count > 0 %>
      <table class="table table-striped">
        <thead>
        <tr>
          <th></th>
          <th>m</th>
          <th>h</th>
          <th>dom</th>
          <th>mon</th>
          <th>dow</th>
          <th></th>
        </tr>
        </thead>
        <tbody>
  <% else %>
      <div class="alert alert-info" role="alert">
        This notification does not has schedules. So it will be always active.
      </div>
  <% end %>
    <% @notification.notifications_schedules.each do |schedule| %>
        <tr>
          <td>
            <a href="/notifications/<%= @notification.id %>/notifications_schedules/<%= schedule.id %>/edit">
              <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            </a>
          </td>
          <td><%= schedule.m %></td>
          <td><%= schedule.h %></td>
          <td><%= schedule.dom %></td>
          <td><%= schedule.mon %></td>
          <td><%= schedule.dow %></td>
          <td>
            <%= link_to raw('<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>'), "/notifications/#{@notification.id}/notifications_schedules/#{schedule.id}", method: :delete, data: { confirm: 'Are you sure?'} %>
          </td>
        </tr>
    <% end %>
    </tbody>
  </table>
</div>